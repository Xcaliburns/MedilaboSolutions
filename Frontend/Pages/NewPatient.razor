@page "/newpatient"
@using Frontend.Models
@using Frontend.Services
@inject DataService DataService
@inject NavigationManager Navigation

<PageTitle>Ajouter un Patient</PageTitle>

<h1>Ajouter un Patient</h1>

@if (!isAuthenticated)
{
    <p>Veuillez vous connecter pour ajouter un patient.</p>
    <button class="btn btn-primary" @onclick="NavigateToLogin">Se connecter</button>
}
else
{
    <EditForm Model="newPatient" OnValidSubmit="CreateNewPatient">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="container">
            <div class="mb-3">
                <label class="form-label">Nom: </label>
                <input class="form-control" @bind="newPatient.Nom" />
                <ValidationMessage For="@(() => newPatient.Nom)" />
            </div>
            <div class="mb-3">
                <label class="form-label">Prénom: </label>
                <input class="form-control" @bind="newPatient.Prenom" />
                <ValidationMessage For="@(() => newPatient.Prenom)" />
            </div>
            <div class="mb-3">
                <label class="form-label">Date de Naissance: </label>
                <input type="date" class="form-control" @bind="newPatient.DateDeNaissance" />
                <ValidationMessage For="@(() => newPatient.DateDeNaissance)" />
            </div>
            <div class="mb-3">
                <label class="form-label">Genre: </label>
                <input class="form-control" @bind="newPatient.Genre" />
                <ValidationMessage For="@(() => newPatient.Genre)" />
            </div>
            <div class="mb-3">
                <label class="form-label">Adresse: </label>
                <input class="form-control" @bind="newPatient.Adresse" />
                <ValidationMessage For="@(() => newPatient.Adresse)" />
            </div>
            <div class="mb-3">
                <label class="form-label">Téléphone: </label>
                <input class="form-control" @bind="newPatient.Telephone" />
                <ValidationMessage For="@(() => newPatient.Telephone)" />
            </div>
            <button class="btn btn-success" type="submit">Ajouter</button>
            @if (!string.IsNullOrEmpty(securityMessage))
            {
                <p class="text-danger">@securityMessage</p>
            }
        </div>
    </EditForm>
}



